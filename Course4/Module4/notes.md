# Module 4: Final Project and Assessment

## Final Project

### Approach to Database Design (including ERD)

- Database Design 
    - is crucial of any data-driven project. It contributes to
        - Integrity
        - Reduction of redundancy
        - Performance
        - User satisfaction
    - Has 3 critical phases:
        - Requirements Analysis:
            - Work closely to stakeholders
            - to Gather and analyse business informations and policies
            - Identify the base objects in the data, and the relationships between them:
                - Ex: A pesron borrows books
            - Identify informations associated with objects:
                - Ex: 
                    - A book has:
                        - a title
                        - a description
                        - an ISBN
                        - authors 
                    - A person has:
                        - name
                        - address
                        - email
                        - phone
                - This is the data acquisition step:
                    - Review existing data stores
                    - Determine current data usage
                    - Gather insights for potential improvements
            - The possible outputs of this phase:
                - A report
                - A data diagram
                - A presentation to stakeholders for validation
        - Logical Design: Transform the output of the previous phaswe, the requirements analysis phase into entities, attributes and relationships, without specifying techinicsl implementation details:
            - Objects evolve entities
            - Ensure objects are realy entities
            - Objects characteristics become attributes
            - Include considerations for entity attributes:
                - Ex: break address down into many parts may be useful:
                    - city
                    - state
                    - zip code
            - Identify the types of each relationships:
                - within:
                    - One to one
                    - One to Many/Many to one
                    - Many to Many
                - Ex:
                    - Considerations:
                        - A person might borrow many books
                        - A book can be boroown to many people
                    - The relation type is then Many to Many
                    - Two entities: book and person
                    - A relation Loan as relationship between person and book:
                        - loan date
                        - return date
                        - loan id (PK)
                        - person id (FK from person)
                        - isbn (fk from book)
            - Apply data normalization for OTP systems and denormalization for OLAP systems:
                - Ex: create an author entity to avoid a book entry having a list of authors as authors attributes(1NF) 

        - Physical Design:
            - Considerations to choose the right DBMS:
                - Supported data types
                - Naming rules
                - Indexes
                - Constrainsts
            - Consider implementaing your conventions including data types:
                - Transform entities in logial design into tables:
                    - Ex:
                        - Person(fisrt name, last name, streat address, city) to person(fisrtname, lastname, streataddress, city)
                        - ![alt text](image.png)
                - You can use ERD designer, pg admin for example to transform your ERD to SQL

### Best Practices of RDBMS Design

- Understand Business Requirements
- Normalize Data to Reduce Redundancy
- Denormalize for Performance Optimization
- Partitioning for Scalability
- Optimize Data Types and Constraints
- Plan for Data Growth and Maintenanc

[Best Practices of RDBMS Design](https://author-ide.skills.network/render?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJtZF9pbnN0cnVjdGlvbnNfdXJsIjoiaHR0cHM6Ly9jZi1jb3Vyc2VzLWRhdGEuczMudXMuY2xvdWQtb2JqZWN0LXN0b3JhZ2UuYXBwZG9tYWluLmNsb3VkL0RyX05XZDVJZ0JXU2kySTVzc0hkUmcvcmRibXMlMjBiZXN0JTIwcHJhY3RpY2VzLXYxLm1kIiwidG9vbF90eXBlIjoiaW5zdHJ1Y3Rpb25hbC1sYWIiLCJhZG1pbiI6ZmFsc2UsImlhdCI6MTcxOTU3NzcxNn0.DakGToCzQDPE4Mg6kR8086W33CG-FKm8-2vPrIo5aIw)

BEGIN;

-- Your commands here
DROP TABLE IF EXISTS departments CASCADE;
DROP TABLE IF EXISTS employees CASCADE;
DROP TABLE IF EXISTS jobs CASCADE;
DROP TABLE IF EXISTS locations CASCADE;

COMMIT;
END;


-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.employees
(
    employee_id integer NOT NULL,
    first_name character varying(20),
    last_name character varying(25) NOT NULL,
    email character varying(100) NOT NULL,
    phone_number character varying(20),
    hire_date date NOT NULL,
    job_id character varying(10) NOT NULL,
    salary numeric(8, 2) NOT NULL,
    commission_pct numeric(2, 2),
    manager_id integer,
    department_id integer,
    PRIMARY KEY (employee_id)
);

CREATE TABLE IF NOT EXISTS public.jobs
(
    job_id character varying(10) NOT NULL,
    job_title character varying(35) NOT NULL,
    min_salary numeric(8, 2),
    max_salary numeric(8, 2),
    PRIMARY KEY (job_id)
);

CREATE TABLE IF NOT EXISTS public.locations
(
    location_id integer NOT NULL,
    street_address character varying(40),
    postal_code character varying(12),
    city character varying(30) NOT NULL,
    state_province character varying(25),
    country_id character(2) NOT NULL,
    PRIMARY KEY (location_id)
);

CREATE TABLE IF NOT EXISTS public.departments
(
    department_id integer NOT NULL,
    department_name character varying(30) NOT NULL,
    manager_id integer,
    location_id integer,
    PRIMARY KEY (department_id)
);

ALTER TABLE IF EXISTS public.employees
    ADD FOREIGN KEY (department_id)
    REFERENCES public.departments (department_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.employees
    ADD FOREIGN KEY (job_id)
    REFERENCES public.jobs (job_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.departments
    ADD FOREIGN KEY (location_id)
    REFERENCES public.locations (location_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.departments
    ADD FOREIGN KEY (manager_id)
    REFERENCES public.employees (employee_id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;

pgerd

![alt text](image-1.png)

### Exam
#### Task1: Identify entities
5 entities identified
- staff
- sales_outlet
- sales_transaction
- customer
- product

![alt text](./Task1.png)

#### Task 2: Identify attributes

9 attributes identified for the sales transaction entity:
- transaction_id
- transaction_date
- transaction_time
- sales_outlet_id
- staff_id
- customer_id
- product_id
- quantity
- price

![alt text](./Task2.png)

#### Task 3: Create an ERD
![alt text](./Task3A.png)

![alt text](./Task3B.png)

![alt text](./Task4A.png)

![alt text](./Task4B.png)

![alt text](./Task5A.png)

![alt text](./Task5B.png)



![alt text](./Task6A.png)

![alt text](./Task6B.png)

![alt text](./Task7.png)

![alt text](./Task8.png)

![alt text](./Task9.png)

![alt text](image-6.png)